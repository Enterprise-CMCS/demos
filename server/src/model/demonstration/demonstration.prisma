model Demonstration {
  id                String    @db.Uuid
  applicationTypeId String    @map("application_type_id")
  name              String
  description       String?
  effectiveDate     DateTime? @map("effective_date") @db.Timestamptz()
  expirationDate    DateTime? @map("expiration_date") @db.Timestamptz()
  sdgDivisionId     String?   @map("sdg_division_id")
  signatureLevelId  String?   @map("signature_level_id")
  statusId          String    @map("status_id")
  currentPhaseId    String    @map("current_phase_id")
  stateId           String    @map("state_id")
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt         DateTime  @updatedAt @map("updated_at") @db.Timestamptz()

  application                  Application                       @relation(fields: [id, applicationTypeId], references: [id, applicationTypeId])
  applicationType              DemonstrationApplicationTypeLimit @relation(fields: [applicationTypeId], references: [id])
  sdgDivision                  SdgDivision?                      @relation(fields: [sdgDivisionId], references: [id], onDelete: Restrict)
  signatureLevel               SignatureLevel?                   @relation(fields: [signatureLevelId], references: [id], onDelete: Restrict)
  status                       ApplicationStatus                 @relation(fields: [statusId], references: [id])
  currentPhase                 Phase                             @relation(fields: [currentPhaseId], references: [id])
  state                        State                             @relation(fields: [stateId], references: [id])
  amendments                   Amendment[]
  extensions                   Extension[]
  demonstrationRoleAssignments DemonstrationRoleAssignment[]

  @@id([id])
  @@unique([id, stateId])
  @@unique([id, applicationTypeId]) // Not required by Postgres, but Prisma requires this notation
  @@map("demonstration")
}
