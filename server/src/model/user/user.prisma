model User {
  id             String   @default(uuid()) @db.Uuid
  personTypeId   String   @map("person_type_id")
  cognitoSubject String   @map("cognito_subject") @db.Uuid
  username       String
  createdAt      DateTime @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt      DateTime @updatedAt @map("updated_at") @db.Timestamptz()

  person                  Person                   @relation(fields: [id, personTypeId], references: [id, personTypeId])
  userPersonTypeLimit     UserPersonTypeLimit      @relation(fields: [personTypeId], references: [id])
  userRoles               UserRole[]
  userStates              UserState[]
  userStateDemonstrations UserStateDemonstration[]
  demonstrations          Demonstration[]
  documents               Document[]
  documentsPendingUpload  DocumentPendingUpload[]
  events                  Event[]
  modifications           Modification[]

  @@id([id])
  @@unique([id, personTypeId]) // TODO: add note here saying that this is a prism-ism. Update doc image to match
  @@map("users")
}
