// Flags: NO_UPDATED_TS, NO_HISTORY
// Table is append-only with no deletions or updates
model Event {
  id            String   @default(uuid()) @db.Uuid
  userId        String?  @map("user_id") @db.Uuid
  roleId        String?  @map("role_id")
  applicationId String?  @map("application_id") @db.Uuid
  eventTypeId   String   @map("event_type_id")
  logLevelId    String   @map("log_level_id")
  route         String
  createdAt     DateTime @default(now()) @map("created_at") @db.Timestamptz()
  eventData     Json     @map("event_data") @db.Json

  role        Role?        @relation(fields: [roleId], references: [id], onDelete: SetNull)
  user        User?        @relation(fields: [userId], references: [id], onDelete: SetNull)
  application Application? @relation(fields: [applicationId], references: [id], onDelete: SetNull)
  eventType   EventType    @relation(fields: [eventTypeId], references: [id])
  logLevel    LogLevel     @relation(fields: [logLevelId], references: [id])

  @@id([id])
  @@map("event")
}
