model Amendment {
  id                String    @db.Uuid
  applicationTypeId String    @map("application_type_id")
  demonstrationId   String    @map("demonstration_id") @db.Uuid
  name              String
  description       String?
  effectiveDate     DateTime? @map("effective_date") @db.Timestamptz()
  statusId          String    @map("status_id")
  currentPhaseId    String    @map("current_phase_id")
  clearanceLevelId  String    @default("CMS (OSORA)") @map("clearance_level_id")
  signatureLevelId  String?   @map("signature_level_id")
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt         DateTime  @updatedAt @map("updated_at") @db.Timestamptz()

  application     Application                   @relation(fields: [id, applicationTypeId], references: [id, applicationTypeId])
  applicationType AmendmentApplicationTypeLimit @relation(fields: [applicationTypeId], references: [id])
  demonstration   Demonstration                 @relation(fields: [demonstrationId], references: [id])
  status          ApplicationStatus             @relation(fields: [statusId], references: [id])
  currentPhase    Phase                         @relation(fields: [currentPhaseId], references: [id])
  clearanceLevel  ClearanceLevel                @relation(fields: [clearanceLevelId], references: [id], onDelete: Restrict)
  signatureLevel  SignatureLevel?               @relation(fields: [signatureLevelId], references: [id], onDelete: Restrict)

  @@id([id])
  @@unique([id, applicationTypeId]) // Not required by Postgres, but Prisma requires this notation
  @@map("amendment")
}
